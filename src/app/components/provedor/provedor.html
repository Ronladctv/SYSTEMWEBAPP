<mat-card class="mat-elevation-z4" style="display: flex; flex-direction: row; padding: 0; height: 35px;">
    <button mat-button
        style="flex: 1; border-right: 1px solid #ccc; font-weight: 600; font-size: 0.9rem; height: 100%; border-radius: 4px !important;"
        (click)="mostrarRegistro.set(true); mostrarTable.set(false)" [class.active]="mostrarRegistro()">
        Registro
    </button>
    <button mat-button
        style="flex: 1; font-weight: 600; font-size: 0.9rem; height: 100%; border-radius: 4px !important;"
        (click)="mostrarTable.set(true); mostrarRegistro.set(false)" [class.active]="mostrarTable()"
        (click)="UpdatePaginator()">
        Tabla
    </button>
</mat-card>
@if (mostrarTable()) {
<mat-card class="mat-elevation-z8">
    <mat-card-title style="font-size: 1.5rem; font-weight: 600; margin-bottom: 12px;">
        Proveedores
    </mat-card-title>
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1px;">
        <div style="display: flex; width: 100%; gap: 12px; align-items: center;">
            <mat-form-field appearance="outline" style="flex: 1 1 50%; margin: 0;">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>
            </mat-form-field>
            <div style="flex: 1 1 50%; display: flex; justify-content: flex-end;">
                @if (addProvedor) {
                <button mat-raised-button color="primary" (click)="NewProvedor()" matTooltip="Agregar Provedor">
                    <mat-icon>engineering_24</mat-icon>
                    Agregar
                </button>
                }
            </div>
        </div>
    </div>
    <table mat-table [dataSource]="dataSource" class="custom-table">
        <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef> Nombres</th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
        <ng-container matColumnDef="LastName">
            <th mat-header-cell *matHeaderCellDef>Apellidos</th>
            <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
        </ng-container>
        <ng-container matColumnDef="Address">
            <th mat-header-cell *matHeaderCellDef>Direccion</th>
            <td mat-cell *matCellDef="let element"> {{element.dddress}} </td>
        </ng-container>
        <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef> Correo </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>
        <ng-container matColumnDef="Phone">
            <th mat-header-cell *matHeaderCellDef> Telefono</th>
            <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
        </ng-container>
        <ng-container matColumnDef="Document">
            <th mat-header-cell *matHeaderCellDef> Documento </th>
            <td mat-cell *matCellDef="let element"> {{element.document}} </td>
        </ng-container>
        <ng-container matColumnDef="Ruc">
            <th mat-header-cell *matHeaderCellDef> Ruc </th>
            <td mat-cell *matCellDef="let element"> {{element.ruc}} </td>
        </ng-container>
        <ng-container matColumnDef="Acciones">
            <th mat-header-cell *matHeaderCellDef style="width: 80px;"> Acciones </th>
            <td mat-cell *matCellDef="let element" style="display: flex; gap: 8px; justify-content: center;">
                <button mat-icon-button aria-label="Editar" class="small-icon-button color-primary"
                    matTooltip="Editar usuario" (click)="EditProvedor(element)"
                    [style.visibility]="editProvedor ? 'visible' : 'hidden'">
                    <mat-icon class="small-icon">edit_square_24</mat-icon>
                </button>
                <button mat-icon-button aria-label="Eliminar" class="small-icon-button color-warn"
                    matTooltip="Eliminar usuario" (click)="DeleteProvider(element.id)"
                    [style.visibility]="deleteProvedor ? 'visible' : 'hidden'">
                    <mat-icon class="small-icon">person_remove_24</mat-icon>
                </button>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator #paginatorProvider [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
        aria-label="Select page of periodic elements">
    </mat-paginator>
</mat-card>

<mat-card class="mat-elevation-z8">
    <mat-card-title style="font-size: 1.5rem; font-weight: 600; margin-bottom: 12px;">
        Proveedores Inactivos
    </mat-card-title>
    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 1px;">
        <div style="display: flex; width: 100%; gap: 12px; align-items: center;">
            <mat-form-field appearance="outline" style="flex: 0 0 50%; margin: 0;">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilterInactive($event)" placeholder="Ex. ium" #input>
            </mat-form-field>
        </div>
    </div>

    <table mat-table [dataSource]="dataSourceInactive" class="custom-table">
        <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef> Nombres</th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
        <ng-container matColumnDef="LastName">
            <th mat-header-cell *matHeaderCellDef>Apellidos</th>
            <td mat-cell *matCellDef="let element"> {{element.lastName}} </td>
        </ng-container>
        <ng-container matColumnDef="Address">
            <th mat-header-cell *matHeaderCellDef>Direccion</th>
            <td mat-cell *matCellDef="let element"> {{element.dddress}} </td>
        </ng-container>
        <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef> Correo </th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>
        <ng-container matColumnDef="Phone">
            <th mat-header-cell *matHeaderCellDef> Telefono</th>
            <td mat-cell *matCellDef="let element"> {{element.phone}} </td>
        </ng-container>
        <ng-container matColumnDef="Document">
            <th mat-header-cell *matHeaderCellDef> Documento </th>
            <td mat-cell *matCellDef="let element"> {{element.document}} </td>
        </ng-container>
        <ng-container matColumnDef="Ruc">
            <th mat-header-cell *matHeaderCellDef> Ruc </th>
            <td mat-cell *matCellDef="let element"> {{element.ruc}} </td>
        </ng-container>
        <ng-container matColumnDef="Acciones">
            <th mat-header-cell *matHeaderCellDef style="width: 80px;"> Acciones </th>
            <td mat-cell *matCellDef="let element" style="display: flex; gap: 8px; justify-content: center;">
                <button mat-icon-button aria-label="Eliminar" class="small-raised-button color-accent"
                    matTooltip="Activar Provedor" (click)="ActivateProvider(element.id)"
                    [style.visibility]="activateProvedor ? 'visible' : 'hidden'">
                    <mat-icon class="small-icon">how_to_reg_24</mat-icon>
                </button>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumnsInactive"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsInactive;"></tr>
    </table>
    <mat-paginator #paginatorProviderInactive [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
        aria-label="Select page of periodic elements">
    </mat-paginator>
</mat-card>
}

@if (mostrarRegistro()) {
<mat-card class="mat-elevation-z4" style="padding: 16px;">
    <mat-card-title style="font-size: 1.5rem; font-weight: 600; margin-bottom: 12px;">
        Proveedores
    </mat-card-title>
    <div style="display: flex; justify-content: flex-end; align-items: center; margin-bottom: 12px;">
        @if (addProvedor) {
        <button mat-raised-button color="primary" (click)="NewProvedor()" matTooltip="Agregar Provedor">
            <mat-icon>engineering_24</mat-icon>
            Agregar
        </button>
        }
    </div>
    <div style="display: flex; flex-direction: column; gap: 12px;">
        @for (provedor of provedorAdmin(); track provedor.id) {
        <div style="width: 100%; border: 1px solid #ccc; border-radius: 6px; overflow: hidden;">

            <!-- Header -->
            <div style="width: 100%; padding:  8px 16px 8px 16px; background-color: #f3f3f3; display: flex; justify-content: space-between; align-items: center; cursor: pointer;"
                (click)="toggleProvider(provedor.id)">
                <div style="flex: 1;">
                    <strong>{{ provedor.name }} {{ provedor.lastName }}</strong>
                </div>
                <button mat-icon-button style="flex-shrink: 0; margin-right: 10px;"
                    (click)="EditProvedor(provedor); $event.stopPropagation()" matTooltip="Editar provedor"
                    class="small-icon-button color-primary" [style.visibility]="editProvedor ? 'visible' : 'hidden'">
                    <mat-icon>edit_square_24</mat-icon>
                </button>
                <button mat-icon-button style="flex-shrink: 0; margin-right: 35px;" matTooltip="Eliminar provedor"
                    class="small-icon-button color-warn" (click)="DeleteProvider(provedor.id)"
                    [style.visibility]="deleteProvedor ? 'visible' : 'hidden'">
                    <mat-icon>person_remove_24</mat-icon>
                </button>
            </div>
            <!-- Expandable Content -->
            <div class="expandable-content" [class.expanded]="expandedProvedor() === provedor.id">
                <div style="padding: 12px; background-color: white;">
                    <div
                        style="max-width: 100%; border: 1px solid #ccc; border-radius: 6px; overflow: hidden; padding: 16px; display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1; display: flex; flex-direction: column; gap: 24px;">
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Nombres:</mat-label>
                                    <input matInput [value]="provedor.name" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: green; font-size: 18px;">person</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Apellidos:</mat-label>
                                    <input matInput [value]="provedor.lastName" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">person_outline</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Numero de Identificacion:</mat-label>
                                    <input matInput [value]="provedor.document" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: violet; font-size: 18px;">badge</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Ruc:</mat-label>
                                    <input matInput [value]="provedor.ruc" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix
                                        style="color: yellow; font-size: 18px;">assignment_ind</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Telefono</mat-label>
                                    <input matInput [value]="provedor.phone" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">phone</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Correo Electronico</mat-label>
                                    <input matInput [value]="provedor.email" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">email</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Direccion de Residencia</mat-label>
                                    <input matInput [value]="provedor.address" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">home</mat-icon>
                                </mat-form-field>
                            </div>
                        </div>
                        <div
                            style="width: 190px; height: 240px; border-radius: 8px; overflow: hidden; margin-left: 24px; flex-shrink: 0; box-shadow: 0 0 5px rgba(0,0,0,0.1);">
                            <img [src]="provedor.urlImagen ? 'https://recursosstorage.blob.core.windows.net/provedores/' + provedor.urlImagen : 'https://recursosstorage.blob.core.windows.net/default/provedoresdefault.png'"
                                style="width: 100%; height: 100%; object-fit: cover;" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        }
    </div>
</mat-card>
<mat-card class="mat-elevation-z4" style="padding: 16px;">
    <mat-card-title style="font-size: 1.5rem; font-weight: 600; margin-bottom: 12px;">
        Proveedores Inactivos
    </mat-card-title>
    <div style="display: flex; flex-direction: column; gap: 12px;">
        @for (provedor of provedorAdminInactive(); track provedor.id) {
        <div style="width: 100%; border: 1px solid #ccc; border-radius: 6px; overflow: hidden;">

            <!-- Header -->
            <div style="width: 100%; padding:  8px 16px 8px 16px; background-color: #f3f3f3; display: flex; justify-content: space-between; align-items: center; cursor: pointer;"
                (click)="toggleProviderInactive(provedor.id)">
                <div style="flex: 1;">
                    <strong>{{ provedor.name }} {{ provedor.lastName }}</strong>
                </div>
                <button mat-icon-button style="flex-shrink: 0; margin-right: 35px;" matTooltip="Activar Provedor"
                    class="small-raised-button color-accent" (click)="ActivateProvider(provedor.id)"
                    [style.visibility]="activateProvedor ? 'visible' : 'hidden'">
                    <mat-icon>how_to_reg_24</mat-icon>
                </button>
            </div>
            <!-- Expandable Content -->
            <div class="expandable-content" [class.expanded]="expandedProvedorInactive() === provedor.id">
                <div style="padding: 12px; background-color: white;">
                    <div
                        style="max-width: 100%; border: 1px solid #ccc; border-radius: 6px; overflow: hidden; padding: 16px; display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1; display: flex; flex-direction: column; gap: 24px;">
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Nombres:</mat-label>
                                    <input matInput [value]="provedor.name" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: green; font-size: 18px;">person</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Apellidos:</mat-label>
                                    <input matInput [value]="provedor.lastName" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">person_outline</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Numero de Identificacion:</mat-label>
                                    <input matInput [value]="provedor.document" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: violet; font-size: 18px;">badge</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Ruc:</mat-label>
                                    <input matInput [value]="provedor.ruc" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix
                                        style="color: yellow; font-size: 18px;">assignment_ind</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Telefono</mat-label>
                                    <input matInput [value]="provedor.phone" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">phone</mat-icon>
                                </mat-form-field>
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Correo Electronico</mat-label>
                                    <input matInput [value]="provedor.email" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">email</mat-icon>
                                </mat-form-field>
                            </div>
                            <div style="display: flex; flex-wrap: wrap; gap: 4%;">
                                <mat-form-field appearance="outline" style="flex: 1 1 48%; height: 56px;">
                                    <mat-label>Direccion de Residencia</mat-label>
                                    <input matInput [value]="provedor.address" readonly style="font-size: 13px;" />
                                    <mat-icon matSuffix style="color: aqua; font-size: 18px;">home</mat-icon>
                                </mat-form-field>
                            </div>
                        </div>
                        <div
                            style="width: 190px; height: 240px; border-radius: 8px; overflow: hidden; margin-left: 24px; flex-shrink: 0; box-shadow: 0 0 5px rgba(0,0,0,0.1);">
                            <img [src]="provedor.urlImagen ? 'https://recursosstorage.blob.core.windows.net/provedores/' + provedor.urlImagen : 'https://recursosstorage.blob.core.windows.net/default/provedoresdefault.png'"
                                style="width: 100%; height: 100%; object-fit: cover;" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        }
    </div>
</mat-card>
}